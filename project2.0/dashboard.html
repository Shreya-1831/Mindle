<!doctype html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Dashboard - Mindle</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Kalam:wght@300;400;700&family=Architects+Daughter&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./dashboard.css">
  </head>
  <body>
    <!-- Notification Container -->
    <div id="notification-container"></div>
    
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="index.html">
          <i class="bi bi-book-half fs-2 me-2"></i>
          <span>Mindle</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                Theme
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#" id="light-theme">Light Theme</a></li>
                <li><a class="dropdown-item" href="#" id="dark-theme">Dark Theme</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                <i class="bi bi-person-circle me-1"></i>
                <span id="user-name">John Doe</span>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#" id="profile-link"><i class="bi bi-person me-2"></i>Profile</a></li>
                <li><a class="dropdown-item" href="#" id="settings-link"><i class="bi bi-gear me-2"></i>Settings</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#" id="logout-link"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Dashboard Content -->
    <div class="dashboard-container">
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="user-avatar">
            <img src="https://ui-avatars.com/api/?name=John+Doe&background=7e9eff&color=fff" alt="User Avatar">
          </div>
          <h5 id="sidebar-user-name">John Doe</h5>
          <p class="user-email">john.doe@example.com</p>
        </div>
        <ul class="sidebar-menu">
          <li class="active"><a href="#"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a></li>
          <li><a href="#"><i class="bi bi-calendar3 me-2"></i>Timetable</a></li>
          <li><a href="#"><i class="bi bi-journal-text me-2"></i>Study Notes</a></li>
          <li><a href="studymethods/study-methods.html"><i class="bi bi-stopwatch me-2"></i>Study Methods</a></li>
          <li><a href="#"><i class="bi bi-graph-up me-2"></i>Progress</a></li>
          <li><a href="#"><i class="bi bi-trophy me-2"></i>Achievements</a></li>
          <li><a href="video chat/index.html"><i class="bi bi-people me-2"></i>Study Groups</a></li>
          <li><a href="#"><i class="bi bi-gear me-2"></i>Settings</a></li>
        </ul>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <div class="dashboard-header">
          <h1>Welcome back, <span id="header-user-name">John</span>!</h1>
          <div class="header-actions">
            <button class="btn btn-primary" id="new-timetable-btn">
              <i class="bi bi-plus-circle me-2"></i>Create New Timetable
            </button>
          </div>
        </div>

        <!-- Stats Cards -->
        <div class="row stats-row">
          <div class="col-md-3 mb-4">
            <div class="stat-card">
              <div class="stat-icon">
                <i class="bi bi-clock-history"></i>
              </div>
              <div class="stat-info">
                <h3>24.5h</h3>
                <p>Study Time This Week</p>
              </div>
            </div>
          </div>
          <div class="col-md-3 mb-4">
            <div class="stat-card">
              <div class="stat-icon">
                <i class="bi bi-lightning-charge"></i>
              </div>
              <div class="stat-info">
                <h3>85%</h3>
                <p>Focus Score</p>
              </div>
            </div>
          </div>
          <div class="col-md-3 mb-4">
            <div class="stat-card">
              <div class="stat-icon">
                <i class="bi bi-check2-circle"></i>
              </div>
              <div class="stat-info">
                <h3>12</h3>
                <p>Tasks Completed</p>
              </div>
            </div>
          </div>
          <div class="col-md-3 mb-4">
            <div class="stat-card">
              <div class="stat-icon">
                <i class="bi bi-award"></i>
              </div>
              <div class="stat-info">
                <h3>4</h3>
                <p>Achievements</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Dashboard Sections -->
        <div class="row">
          <!-- Study Progress -->
          <div class="col-lg-8 mb-4">
            <div class="dashboard-card">
              <div class="card-header">
                <h2>Study Progress</h2>
                <div class="dropdown">
                  <button class="btn btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                    This Week
                  </button>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">This Week</a></li>
                    <li><a class="dropdown-item" href="#">This Month</a></li>
                    <li><a class="dropdown-item" href="#">Last 3 Months</a></li>
                  </ul>
                </div>
              </div>
              <div class="card-body">
                <canvas id="studyProgressChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Upcoming Tasks -->
          <div class="col-lg-4 mb-4">
            <div class="dashboard-card">
              <div class="card-header">
                <h2>Upcoming Tasks</h2>
                <button class="btn btn-sm btn-outline-primary">
                  <i class="bi bi-plus-lg"></i>
                </button>
              </div>
              <div class="card-body p-0">
                <ul class="task-list">
                  <li class="task-item">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="task1">
                      <label class="form-check-label" for="task1">
                        Complete Math Assignment
                      </label>
                    </div>
                    <span class="task-date">Today</span>
                  </li>
                  <li class="task-item">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="task2">
                      <label class="form-check-label" for="task2">
                        Review Physics Notes
                      </label>
                    </div>
                    <span class="task-date">Today</span>
                  </li>
                  <li class="task-item">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="task3">
                      <label class="form-check-label" for="task3">
                        Prepare for History Quiz
                      </label>
                    </div>
                    <span class="task-date">Tomorrow</span>
                  </li>
                  <li class="task-item">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="task4">
                      <label class="form-check-label" for="task4">
                        Research Paper Draft
                      </label>
                    </div>
                    <span class="task-date">May 15</span>
                  </li>
                  <li class="task-item">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" id="task5">
                      <label class="form-check-label" for="task5">
                        Group Project Meeting
                      </label>
                    </div>
                    <span class="task-date">May 16</span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <!-- Subject Performance -->
          <div class="col-lg-6 mb-4">
            <div class="dashboard-card">
              <div class="card-header">
                <h2>Subject Performance</h2>
              </div>
              <div class="card-body">
                <canvas id="subjectPerformanceChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Study Methods Used -->
          <div class="col-lg-6 mb-4">
            <div class="dashboard-card">
              <div class="card-header">
                <h2>Study Methods Used</h2>
              </div>
              <div class="card-body">
                <div class="method-usage">
                  <div class="method-item">
                    <div class="method-info">
                      <h4>Pomodoro Technique</h4>
                      <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 85%"></div>
                      </div>
                    </div>
                    <span class="method-percentage">85%</span>
                  </div>
                  <div class="method-item">
                    <div class="method-info">
                      <h4>Active Recall</h4>
                      <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 65%"></div>
                      </div>
                    </div>
                    <span class="method-percentage">65%</span>
                  </div>
                  <div class="method-item">
                    <div class="method-info">
                      <h4>Feynman Technique</h4>
                      <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 45%"></div>
                      </div>
                    </div>
                    <span class="method-percentage">45%</span>
                  </div>
                  <div class="method-item">
                    <div class="method-info">
                      <h4>Mind Mapping</h4>
                      <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 30%"></div>
                      </div>
                    </div>
                    <span class="method-percentage">30%</span>
                  </div>
                  <div class="method-item">
                    <div class="method-info">
                      <h4>Spaced Repetition</h4>
                      <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 25%"></div>
                      </div>
                    </div>
                    <span class="method-percentage">25%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="row">
          <div class="col-12 mb-4">
            <div class="dashboard-card">
              <div class="card-header">
                <h2>Recent Activity</h2>
              </div>
              <div class="card-body p-0">
                <ul class="activity-list">
                  <li class="activity-item">
                    <div class="activity-icon">
                      <i class="bi bi-clock"></i>
                    </div>
                    <div class="activity-details">
                      <h4>Completed a 2-hour study session</h4>
                      <p>Mathematics - Calculus</p>
                      <span class="activity-time">Today, 2:30 PM</span>
                    </div>
                  </li>
                  <li class="activity-item">
                    <div class="activity-icon">
                      <i class="bi bi-check2-all"></i>
                    </div>
                    <div class="activity-details">
                      <h4>Completed assignment</h4>
                      <p>Physics - Quantum Mechanics</p>
                      <span class="activity-time">Today, 11:45 AM</span>
                    </div>
                  </li>
                  <li class="activity-item">
                    <div class="activity-icon">
                      <i class="bi bi-journal-plus"></i>
                    </div>
                    <div class="activity-details">
                      <h4>Added new study notes</h4>
                      <p>Biology - Cell Structure</p>
                      <span class="activity-time">Yesterday, 4:15 PM</span>
                    </div>
                  </li>
                  <li class="activity-item">
                    <div class="activity-icon">
                      <i class="bi bi-trophy"></i>
                    </div>
                    <div class="activity-details">
                      <h4>Earned achievement</h4>
                      <p>"Study Streak: 7 Days"</p>
                      <span class="activity-time">Yesterday, 9:30 AM</span>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- New Timetable Modal -->
    <div class="modal fade" id="newTimetableModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Create New Timetable</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="timetable-form">
              <div class="mb-3">
                <label for="timetable-name" class="form-label">Timetable Name</label>
                <input type="text" class="form-control" id="timetable-name" placeholder="e.g., Spring Semester 2025" required>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <label for="start-date" class="form-label">Start Date</label>
                  <input type="date" class="form-control" id="start-date" required>
                </div>
                <div class="col-md-6">
                  <label for="end-date" class="form-label">End Date</label>
                  <input type="date" class="form-control" id="end-date" required>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Days of Week</label>
                <div class="d-flex flex-wrap gap-2">
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="monday" value="monday" checked>
                    <label class="form-check-label" for="monday">Monday</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="tuesday" value="tuesday" checked>
                    <label class="form-check-label" for="tuesday">Tuesday</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="wednesday" value="wednesday" checked>
                    <label class="form-check-label" for="wednesday">Wednesday</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="thursday" value="thursday" checked>
                    <label class="form-check-label" for="thursday">Thursday</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="friday" value="friday" checked>
                    <label class="form-check-label" for="friday">Friday</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="saturday" value="saturday">
                    <label class="form-check-label" for="saturday">Saturday</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="sunday" value="sunday">
                    <label class="form-check-label" for="sunday">Sunday</label>
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label for="preferred-language" class="form-label">Preferred Language</label>
                <select class="form-select" id="preferred-language" required>
                  <option value="" selected disabled>Select your preferred language</option>
                  <option value="english">English</option>
                  <option value="spanish">Spanish</option>
                  <option value="french">French</option>
                  <option value="german">German</option>
                  <option value="chinese">Chinese</option>
                  <option value="japanese">Japanese</option>
                  <option value="korean">Korean</option>
                  <option value="hindi">Hindi</option>
                  <option value="arabic">Arabic</option>
                  <option value="russian">Russian</option>
                  <option value="portuguese">Portuguese</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="domain" class="form-label">Learning Domain</label>
                <select class="form-select" id="domain" required>
                  <option value="" selected disabled>Select your learning domain</option>
                  <option value="computer_science">Computer Science</option>
                  <option value="data_science">Data Science</option>
                  <option value="web_development">Web Development</option>
                  <option value="mobile_development">Mobile App Development</option>
                  <option value="artificial_intelligence">Artificial Intelligence</option>
                  <option value="mathematics">Mathematics</option>
                  <option value="physics">Physics</option>
                  <option value="chemistry">Chemistry</option>
                  <option value="biology">Biology</option>
                  <option value="business">Business & Management</option>
                  <option value="languages">Languages</option>
                  <option value="arts">Arts & Design</option>
                  <option value="music">Music</option>
                  <option value="health">Health & Medicine</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="courses" class="form-label">Recommended Courses</label>
                <select class="form-select" id="courses" disabled>
                  <option value="" selected>Select a domain first to see recommended courses</option>
                </select>
                <div class="mt-2 small text-muted">Courses will be recommended based on your domain selection</div>
              </div>
              <div class="mb-3">
                <label for="total-hours" class="form-label">Total Study Hours per Week</label>
                <input type="number" class="form-control" id="total-hours" min="1" max="80" value="20" required>
              </div>
              <div class="mb-3">
                <label for="study-methods" class="form-label">Preferred Study Methods</label>
                <select class="form-select" id="study-methods" multiple required>
                  <option value="pomodoro">Pomodoro Technique</option>
                  <option value="feynman">Feynman Technique</option>
                  <option value="active_recall">Active Recall</option>
                  <option value="spaced_repetition">Spaced Repetition</option>
                  <option value="mind_mapping">Mind Mapping</option>
                  <option value="cornell">Cornell Note-Taking</option>
                  <option value="sq3r">SQ3R Method</option>
                  <option value="interleaved">Interleaved Learning</option>
                </select>
                <div class="mt-2 small text-muted">Hold Ctrl/Cmd to select multiple methods</div>
              </div>
              <div class="mb-3">
                <label for="study-preferences" class="form-label">Study Time Preference</label>
                <select class="form-select" id="study-preferences">
                  <option value="morning">Morning Person (Early study sessions)</option>
                  <option value="evening">Evening Person (Later study sessions)</option>
                  <option value="distributed">Distributed (Spread throughout the day)</option>
                  <option value="blocked">Blocked (Concentrated study periods)</option>
                </select>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" id="find-courses-btn" onclick="window.location.href = 'course-recommendation.html'">Find Courses</button>
            <button type="button" class="btn btn-success" id="create-timetable-btn" disabled>Create Timetable</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Course Recommendations Modal -->
    <div class="modal fade" id="courseRecommendationsModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Recommended Courses</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <p>Based on your preferences, we recommend the following courses:</p>
            </div>
            <div id="recommended-courses-container" class="row g-3">
              <!-- Courses will be dynamically added here -->
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Back to Timetable</button>
            <button type="button" class="btn btn-primary" id="select-courses-btn">Select Courses</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Generated Timetable Modal -->
    <div class="modal fade" id="generatedTimetableModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Your Generated Timetable</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="timetable-container">
              <div class="row mb-4">
                <div class="col-12">
                  <h3 id="timetable-title" class="mb-3">Spring Semester 2025</h3>
                  <div class="alert alert-info">
                    <i class="bi bi-info-circle-fill me-2"></i>
                    Click on any task to see study method details and start your study session.
                  </div>
                </div>
              </div>
              <div class="table-responsive">
                <table class="table table-bordered timetable-table">
                  <thead>
                    <tr>
                      <th>Time</th>
                      <th>Monday</th>
                      <th>Tuesday</th>
                      <th>Wednesday</th>
                      <th>Thursday</th>
                      <th>Friday</th>
                      <th>Saturday</th>
                      <th>Sunday</th>
                    </tr>
                  </thead>
                  <tbody id="timetable-body">
                    <!-- Timetable will be dynamically generated here -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="save-timetable-btn">Save Timetable</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Study Method Modal -->
    <div class="modal fade" id="studyMethodModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="study-method-title">Study Session</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div id="study-method-content">
              <!-- Study method content will be dynamically added here -->
            </div>
            
            <!-- Pomodoro Timer (initially hidden) -->
            <div id="pomodoro-container" class="text-center mt-3" style="display: none;">
              <div class="timer-display mb-3">
                <span id="minutes">25</span>:<span id="seconds">00</span>
              </div>
              <div class="timer-controls">
                <button id="start-timer" class="btn btn-primary me-2">Start</button>
                <button id="pause-timer" class="btn btn-warning me-2" disabled>Pause</button>
                <button id="reset-timer" class="btn btn-danger">Reset</button>
              </div>
              <div class="mt-3">
                <span id="timer-status">Work Time</span>
                <div class="progress mt-2">
                  <div id="timer-progress" class="progress-bar" role="progressbar" style="width: 0%"></div>
                </div>
              </div>
            </div>
            
            <!-- Active Recall Container (initially hidden) -->
            <div id="active-recall-container" class="mt-3" style="display: none;">
              <div class="card mb-3">
                <div class="card-body">
                  <h5 class="card-title">Active Recall Practice</h5>
                  <p class="card-text">Create questions about the material you're studying and try to answer them without looking at your notes.</p>
                  <div class="mb-3">
                    <label for="recall-question" class="form-label">Your Question:</label>
                    <textarea class="form-control" id="recall-question" rows="2"></textarea>
                  </div>
                  <div class="mb-3">
                    <label for="recall-answer" class="form-label">Your Answer:</label>
                    <textarea class="form-control" id="recall-answer" rows="3"></textarea>
                  </div>
                  <button id="save-recall" class="btn btn-primary">Save Question & Answer</button>
                </div>
              </div>
              <div id="saved-questions" class="mt-3">
                <!-- Saved questions will appear here -->
              </div>
            </div>
            
            <!-- Feynman Technique Container (initially hidden) -->
            <div id="feynman-container" class="mt-3" style="display: none;">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Feynman Technique</h5>
                  <p class="card-text">Explain the concept in simple terms as if teaching it to someone else.</p>
                  <div class="mb-3">
                    <label for="concept-name" class="form-label">Concept:</label>
                    <input type="text" class="form-control" id="concept-name">
                  </div>
                  <div class="mb-3">
                    <label for="concept-explanation" class="form-label">Your Explanation:</label>
                    <textarea class="form-control" id="concept-explanation" rows="4" placeholder="Explain this concept in simple terms..."></textarea>
                  </div>
                  <div class="mb-3">
                    <label for="concept-gaps" class="form-label">Identified Gaps:</label>
                    <textarea class="form-control" id="concept-gaps" rows="2" placeholder="Note any areas where your understanding is incomplete..."></textarea>
                  </div>
                  <button id="save-feynman" class="btn btn-primary">Save Explanation</button>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-success" id="complete-session-btn">Complete Session</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./dashboard.js"></script>
  </body>
</html>